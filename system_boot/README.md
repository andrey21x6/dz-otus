# Загрузка системы

# **Prerequisite**
- Host OS: Ubuntu Desktop 20.04.4
- Guest OS: Cent OS 7.5.1804
- VirtualBox: 6.1.36
- Vagrant: 2.3.0-1

# **Содержание ДЗ**

* Попасть в систему без пароля несколькими способами
* Установить систему с LVM, после чего переименовать VG
* Добавить модуль в initrd


# **Выполнение**

### Попасть в систему без пароля несколькими способами

Запускаем Vagrant и заходим в виртуалку
```
vagrant up
vagrant ssh
```

Инициализирует root и задаём ему пароль
```
sudo passwd root
```

Перезагружаем систему и при показе меню нажимаем клавишу е
```
sudo reboot
```

Ищем строку начинающуюся с linux16 и дописываем в конце rd.break и нажимаем сочетание клавиш Сtrl+x

Когда загрузится, выполняем команду перемонтирования, чтобы sysroot сделать записываемым
```
mount -o remount,rw /sysroot
```

Затем выполняем команду входа в chroot
```
chroot /sysroot
```

Далее меняем пароль root как обычно
```
passwd root
```

Создаём файл переиндексации при загрузки системы
```
touch /.autorelabel
```

Выполняем команду перемонтирования, чтобы sysroot сделать RO
```
mount -o remount,ro /sysroot
```

Далее перезагружаемся и заходим под новым паролем
```
reboot
```

Другие способы отличаются установкой других параметров в конфигурацию загрузки. А именно:
* В строке начинающуюся с linux16, дописываем в конце init=/bin/sh и нажимаем сочетание клавиш Сtrl+x и выполняем mount -o remount,rw / и т. д. по аналогии
* В строке начинающуюся с linux16, заменāем ro на rw init=/sysroot/bin/sh и нажимаем сочетание клавиш Сtrl+x


### Установить систему с LVM, после чего переименовать VG












# **Результаты**

Полученный в ходе работы `Vagrantfile` помещен в публичный репозиторий:
- **GitHub** - https://github.com/andrey21x6/dz-otus/tree/main/nfs

